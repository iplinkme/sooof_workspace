# STM32 ESP32

###### 0x01 ---

stm32 与 esp32(esp8266)是不是属于同一层次上的东西?

1 - ESP32 , 特点, 成本低, 内存足够, 拿上手就直接可用. 
2 - 树莓派 , 特点, 内存超大, 性能更强. 能做USB开发, 
3 - STM32 , 特点, 接口超多而全面, 适合做超多部件的场合. 

都是单片机.一个有 wifi,ble,双核,一个没有



stm32 是 ARM 架构 
esp88266 是 RISC 机构
都是单片机 stm32 性能强些


STM32 一般归为 MCU ； esp8266 一般归为 SOC。
不过后者确实可以独立使用，但是性能实际上没那么好。

esp32 双核的要带 psram 才好用，不带 sram 的挺辛苦的

Arduinod是给电子爱好者玩的，真的学东西做开发必然是stm32


说STM32简单的先去做一个真正的板子，焊上元件，调试电路去吧。从板子的设计，布局走线敷铜，再到模拟元器件的选型调试，你再去调试整个电路板，这都似乎被你们说的一文不值，或许你们是大牛，但是也是基础不稳的大牛。


###### 0x02 --- 我为什么要选择学习STM32？
 
我对未来的规划是以功能性为主的，在功能和面积之间做以平衡是我的首要选择，而把运算放在第二位，这根我的专业有关系。里面的运算其实并不复杂，在入门阶段想尽量减少所接触的东西。
不过说实话，对DSP的外设并和开发环境不满意，这是为什么STM32一出就转向的原因。下面是我自己做过的两块DSP28的全功能最小系统板，在做这两块板子的过程中发现要想尽力缩小DSP的面积实在不容易(目前只能达到50mm×45mm，这还是没有其他器件的情况下)，尤其是双电源的供电方式和1.9V的电源让人很头疼。
后来因为一个项目，接触了LPC
2148并做了一块板子，发现小型的ARM7在外设够用的情况下其实很不错，于是开始搜集相关芯片资料，也同时对小面积的AVR和51都进行了大致的比较，这个时候发现了CortexM3的STM32，比2148拥有更丰富和灵活的外设，性能几乎是2148两倍(按照MIPS值计算)。正好2148我还没上手，就直接转了这款STM32F103。
与2811相比较(核心1.8V供电情况下)，135MHz×1MIPS。现在用STM32F103，72MHz×1.25MIPS，性能是DSP的66%，STM32F103R型(64管脚)芯片面积只有2811的51%，STM32F103C型(48管脚)面积是2811的25%，最大功耗是DSP的20%，单片价格是DSP的30%。且有更多的串口，CAP和PWM，这是有用的。高端型号有SDIO，理论上比SPI速度快。
由以上比较，准备将未来的拥有操作系统的高端应用交给DSP的新型浮点型单片机28335，而将所有紧凑型小型、微型应用交给STM32。

###### 0x02 --- STM32学习之启动代码很重要！

最近在写一个人机界面，由于硬件同事布板的问题，必须要用到串口4，先开始我还觉得没什么，就是把USART1改成4以及改下开启时钟和配置引脚。
但是事实证明我的想法是多么愚蠢，调了整整2天，UART4发送很好，但是就是在接收时死活的卡在中断之前，就会进入HardFaultException B HardFaultException。真是百思不得其解，我就一步步调试跟踪，也没有发现任何问题，UART4的配置都是正确的，引脚也都没问题。这两天真是调试的快崩溃了。在网上查询该问题，大家也都没有答案，有些人甚至直接说UART4不能用，说心里话我不相信，别个STM那么大的公司，会推出不能用的功能?
在我最无助的时候，我突然想起我们大学老师的一句话，中断出问题，就多看看启动代码的中断向量部分，多去理解。事实证明老师是对的，我花了半天的时间仔细的看了我的启动代码，乖乖启动代码里面居然没有
IMPORT UART4_IRQHandler
IMPORT UART5_IRQHandler
DCD UART4_IRQHandler
DCD UART5_IRQHandler
而串口1、2、3都有。于是我加上了以上代码，串口成功的进入中断，并且接收到了数据。
搞了STM32已经快3个月了，第一次仔细的看了启动代码，之前一直认为启动代码就是现成的，所以从来都不去看，觉得看了也没用。事实证明这样的想法是愚蠢的。
发了下牢骚，但是真心希望大家不要忽略了启动代码。也真心希望以上解决方法能帮助到你。

###### 0x02 ---

你说要不要学51，因为你不知道学51学的是什么，你要学的是底层的东西，底层的东西什么芯片都能学.....性能什么的没什么好比的，只是说最适合该产品的芯片是最好的...当初一学弟拼性能，从51开发板、STM32、S3C2440一路升级到Cortex-A8，然后就没有然后了.....
你要说光会画个PCB，会编程，开发一些基本的功能，你之前也是IT行业的，对你来说应该很快就会入门（当然入门归入门）
确实能做自己想做的电子小玩意一直是始终坚守在这个行业的动力啊，不像纯软件的只能对着电脑玩啊..弄不好爸妈还说一天到晚玩电脑没出息啊...


这个问题我有资格说一句吧！
1. 学习51单片机的目的不是为了工作中为了使用51，而是为了培养直接调试寄存器与软硬件接口bug的能力。
2. 51单片机没有sdk的支持和过多的软件封装，能够直接把外设寄存器功能暴露在你面前，让你真正体验调寄存器的感觉。。
3. 不用花太多时间专研专精所谓51单片机，但是还是应该通过一两个中等规模的项目，来培养通过调寄存器和数字电路交互，debug的能力，找到调寄存器的感觉，这种感觉很重要。
4.搞嵌入式有时候就像NBA篮球赛，常规时间得分都是写软件，调用api，设计数据结构。可能调寄存器的功夫大部分时间都用不上。
5. 但是到了最后几秒的绝杀时刻，比分僵持(要到交付日期了，但是底层还有未知bug，不清楚到底是软件还是硬件bug)，这个时候，抛开sdk和api封装，直接调试寄存器诊断软硬件bug的功力就体现了，这就像投绝杀球一样，直接决定比赛胜负(项目成败)。。
6. 绝杀球不是每场比赛都有机会投，一场比赛大部分时间都不要投绝杀球，但是你们觉得投绝杀球的能力(直接调试寄存器，诊断软硬件bug的能力)要不要有，要不要纳入你的训练范围。
7. 直接调试寄存器，诊断软硬件bug的能力，你们认为应该通过什么方式来培养，stm32 A8/A9这么复杂的datasheet寄存器手册，得花多少时间培养这样调寄存器的感觉呢？


如果你是电子类专业的学生，将来要用单片机/嵌入式谋生的
如果你属于这类，51单片机是值得作为入门学习的！原因有几点：
其一，51是相关大学专业必学课程，其实是因为大部分的高校老师只会51了；
其二，51书籍多资料多，同第一条一样是因为一些历史原因；
其三，51麻雀虽小五脏俱全，用来学习是不错的；同样，AVR单片机或者STM8等都可以用来入门，但51还是太经典太主流了；
其四，单片机万变不离其宗，学通51也就会用其他单片机了（其实这是一个经验的问题）。
 
很多答主都是在三、四点上讲了很多细节化。我下面也稍微写一点：
* 其实不论用哪一款单片机，片内资源都是差不多的：GPIO、定时器Timer和中断、通信类UART/IIC/SPI、ADC/DAC等等等，这些资源就算换了一个单片机也会非常眼熟。
* 然后是外设，其实这一部分和51无关了：LED、LCD、数码管、各种传感器等等，这些资源当你在51平台学习过之后，在其他地方使用也是一样的；
* 最后单片机开发和debug的能力，我觉得这和经验有点关系了，这里的经验不是浮在水面上那种调用一下API的业务经验，而是深入理解单片机原理的经验。我以前玩51玩得贼溜，后来一接手STM32，几乎总在GPIO上犯错！（STM32的GPIO需要初始化和设定输出输出而STC51不用）然后还有什么中断向量表啊，Flash的读写（先解锁再擦除最后写入）啊什么的，玩51的时候可没接触过那么多！
 
因此，感觉自己玩51玩得差不多的时候，就没必要在51上继续研究了，可以走上STM32的道路。那既然最后都要上STM，为什么我还是推荐51作为入门学习呢？因为51单片机屏蔽了很多高级细节却也足够全面，正如我前面第三点：麻雀虽小五脏俱全。把麻雀研究透了再看其他鸟类不都是一个鸟样吗？只不过这只鸟嘴长那只鸟脚长嘛。
